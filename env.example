# Blockchain Gateway - Environment Configuration
# ⚠️  SECURITY WARNING: DO NOT USE THESE DEFAULT VALUES IN PRODUCTION!
# Copy this file to .env and update ALL values with secure credentials
# Generate secure values using: python -c "import secrets; print(secrets.token_urlsafe(32))"

# Database Configuration
# ⚠️  Change username and password to strong, unique values
# Example: postgresql://prod_user:$(openssl rand -base64 32)@localhost:5432/blockchain_gateway
DATABASE_URL=postgresql://gateway_user:CHANGE_THIS_PASSWORD@localhost:5432/blockchain_gateway
DATABASE_URL_ASYNC=postgresql+asyncpg://gateway_user:CHANGE_THIS_PASSWORD@localhost:5432/blockchain_gateway

# Redis Configuration
# ⚠️  Add password for Redis in production: redis://:YOUR_REDIS_PASSWORD@localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# JWT Configuration
# ⚠️  CRITICAL: Generate a new SECRET_KEY using:
# python -c "import secrets; print(secrets.token_urlsafe(64))"
# This key should be at least 256 bits (32 bytes) and kept absolutely secret
SECRET_KEY=CHANGE_THIS_TO_RANDOM_256BIT_KEY_GENERATED_WITH_SECURE_METHOD
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# API Configuration
API_V1_STR=/api/v1
PROJECT_NAME=Blockchain Gateway Backend
VERSION=3.0.0
# ⚠️  Set DEBUG=False in production to prevent information leakage
DEBUG=False

# CORS Configuration
# ⚠️  Specify exact allowed origins, never use wildcard (*) in production
# Example: https://app.example.com,https://admin.example.com
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Fabric Gateway Integration (Backend dùng biến này)
FABRIC_GATEWAY_URL=http://fabric-gateway:3001
GATEWAY_TIMEOUT=30

# Fabric CA Configuration
# ⚠️  Change default admin credentials immediately
FABRIC_CA_URL=http://ca-org1:8054
FABRIC_CA_ADMIN_USERNAME=admin
FABRIC_CA_ADMIN_PASSWORD=adminpw
FABRIC_CA_TLS_ENABLED=False

# File Upload Configuration
# ⚠️  Limit file size based on your infrastructure (5MB recommended)
MAX_FILE_SIZE=5242880
UPLOAD_DIRECTORY=./uploads
# Only allow specific chaincode extensions
ALLOWED_EXTENSIONS=.go,.java,.js,.ts

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/backend.log

# Monitoring
ENABLE_METRICS=True
METRICS_PORT=9090

# Security
BCRYPT_ROUNDS=12
# ⚠️  Enforce strong password policy
PASSWORD_MIN_LENGTH=12
# Session timeout in minutes
SESSION_TIMEOUT=30
# Maximum login attempts before lockout
MAX_LOGIN_ATTEMPTS=5
# Lockout duration in minutes
LOCKOUT_DURATION=15

# Frontend Configuration
REACT_APP_API_URL=http://localhost:4000/api/v1
REACT_APP_WS_URL=ws://localhost:4000
REACT_APP_ENVIRONMENT=development

# (Tùy chọn) Cấu hình cho API Gateway nếu sử dụng
# BACKEND_URL=http://backend:4000
# FRONTEND_URL=http://frontend:3000
# ⚠️  Use the same SECRET_KEY as above for JWT validation
JWT_SECRET=CHANGE_THIS_TO_SAME_SECRET_KEY_AS_ABOVE

# Fabric Gateway Configuration
FABRIC_NETWORK_CONFIG_PATH=/app/crypto
FABRIC_PEER_ENDPOINT=peer0.org1.example.com:7051
FABRIC_CHANNEL_NAME=mychannel
FABRIC_CHAINCODE_NAME=basic
FABRIC_MSP_ID=Org1MSP
FABRIC_IDENTITY=User1@org1.example.com
FABRIC_AS_LOCALHOST=false
FABRIC_GATEWAY_PORT=3001

# Production Security Settings (uncomment for production)
# HTTPS_ENABLED=True
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem
# HSTS_MAX_AGE=31536000
# RATE_LIMIT_ENABLED=True
# RATE_LIMIT_PER_MINUTE=60
